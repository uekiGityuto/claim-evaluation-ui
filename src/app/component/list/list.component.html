<header>

  <div class="main-header">
    <span>{{ userId }}</span>
  </div>

  <div class="list-header card">
    <form [(formGroup)]="searchControl">
      <div>
        <input type="text" formControlName="claimNumber" placeholder="受付番号">
      </div>
      <div>
        <select formControlName="claimCategory" placeholder="事案カテゴリ">
          <option value=""></option>
          <option value="高">高</option>
          <option value="中">中</option>
          <option value="低">低</option>
        </select>
      </div>
      <div>
        <select formControlName="insuranceKindInfo" placeholder="保険種類">
          <option value=""></option>
          <option value="自動車">自動車</option>
          <option value="火災">火災</option>
        </select>
      </div>
      <div class="from-lossdate-form">
        <input type="text" [matDatepicker]="pickerFrom" placeholder="事故日from" formControlName="fromLossDate">
        <span class=datepicker>
          <mat-datepicker-toggle matSuffix [for]="pickerFrom"></mat-datepicker-toggle>
          <mat-datepicker #pickerFrom></mat-datepicker>
        </span>
      </div>
      <div>
        <span>～</span>
      </div>
      <div class="to-lossdate-form">
        <input type=text [matDatepicker]="pickerTo" placeholder="事故日to" formControlName="toLossDate">
        <span class=datepicker>
          <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
          <mat-datepicker #pickerTo></mat-datepicker>
        </span>
      </div>
      <div>
        <input type="text" type="text" formControlName="insuredNameKana" placeholder="被保険者名（カナ）">
      </div>
      <div>
        <input type="text" type="text" formControlName="insuredNameKanji" placeholder="被保険者名（漢字）">
      </div>
      <div>
        <input type="text" type="text" formControlName="contractorNameKana" placeholder="契約者名（カナ）">
      </div>
      <div>
        <input type="text" type="text" formControlName="contractorNameKanji" placeholder="契約者名（漢字）">
      </div>
      <div class="radio-form">
        <div><input type="radio" formControlName="departmentOrBaseRadio" value="department">担当部</div>
        <div><input type="radio" formControlName="departmentOrBaseRadio" value="base">担当拠点</div>
      </div>
      <div>
        <input type="text" type="text" formControlName="departmentOrBase" placeholder="担当部・担当拠点">
      </div>
      <div>
        <button [disabled]="searchControl.invalid" (click)="search()">検索</button>
      </div>
    </form>
  </div>

</header>

<main>

  <ng-container *ngIf="claims.length != 0">
    <table class="claim-list card" matSort (matSortChange)="listSort($event)">
      <tr class="claim-list-header">
        <th mat-sort-header="claimNumber">受付番号</th>
        <th mat-sort-header="insuredName">被保険者名</th>
        <th mat-sort-header="contractorName">契約者名</th>
        <th mat-sort-header="department">担当部</th>
        <th mat-sort-header="base">担当拠点</th>
        <th mat-sort-header="insuranceKind">保険種類</th>
        <th mat-sort-header="lastUpdateDate">最終更新日</th>
        <th mat-sort-header="lossDate">事故日</th>
        <th mat-sort-header="claimCategory">事案カテゴリ</th>
      </tr>
      <tr class="claim-list-data" #tableDatas *ngFor="let claim of claims" align="center" valign="middle">
        <td><a [routerLink]="['/detail', claim.claimNumber]">{{ claim.claimNumber }}</a></td>
        <td [appTooltip]="claim.insuredName" maxSize="9" style="width: 160px">{{ claim.insuredName }}</td>
        <td [appTooltip]="claim.contractorName" maxSize="9" style="width: 160px">{{ claim.contractorName }}</td>
        <td>{{ claim.department }}</td>
        <td>{{ claim.base }}</td>
        <td>{{ claim.insuranceKind }}</td>
        <td>{{ claim.lastUpdateDate | date : 'yyyy/M/d' }}</td>
        <td>{{ claim.lossDate | date : 'yyyy/M/d'}}</td>
        <td><span class="claim-category" [ngClass]="claim.categoryClass">{{ claim.claimCategory }}</span></td>
      </tr>
    </table>

    <div class="pager child-centering">
      <form #pageForm="ngForm">
        <button *ngIf="param.displayFrom !== '1'" mat-icon-button (click)="previous()">
          <mat-icon>arrow_back_ios</mat-icon>
        </button>
        <input name="page" type="number" [(ngModel)]="fromPages" required min="1" [max]="totalNumber" #page="ngModel">
        <span>～　{{ toPages }}　/　{{ totalNumber }}</span>
        <button *ngIf="toPages < totalNumber" mat-icon-button>
          <mat-icon>arrow_forward_ios</mat-icon>
        </button>
        <button [disabled]="pageForm.invalid" mat-icon-button (click)="update()">
          <mat-icon>refresh</mat-icon>
        </button>
      </form>
    </div>
  </ng-container>

</main>
