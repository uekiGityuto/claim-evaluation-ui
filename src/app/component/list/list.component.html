<!-- ヘッダエリア -->
<header>
  <div class="main-header">
    <span>{{ userId }}</span>
  </div>
</header>

<main>
  <!-- サブヘッダエリア -->
  <div class="list-header card">
    <form [(formGroup)]="searchControl">
      <div>
        <input type="text" formControlName="CLAIMNUMBER" placeholder="受付番号">
      </div>
      <div>
        <select formControlName="CLAIMCATEGORYINFO" placeholder="事案カテゴリ" multiple>
          <option value="高">高</option>
          <option value="中">中</option>
          <option value="低">低</option>
        </select>
      </div>
      <div>
        <select formControlName="INSURANCEKINDINFO" placeholder="保険種類" multiple>
          <option value="自動車">自動車</option>
          <option value="火災">火災</option>
        </select>
      </div>
      <div class="from-lossdate-form">
        <input type="text" [matDatepicker]="pickerFrom" placeholder="事故日from" formControlName="FROMLOSSDATE">
        <span class=datepicker>
          <mat-datepicker-toggle matSuffix [for]="pickerFrom"></mat-datepicker-toggle>
          <mat-datepicker #pickerFrom></mat-datepicker>
        </span>
      </div>
      <div>
        <span>～</span>
      </div>
      <div class="to-lossdate-form">
        <input type=text [matDatepicker]="pickerTo" placeholder="事故日to" formControlName="TOLOSSDATE">
        <span class=datepicker>
          <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
          <mat-datepicker #pickerTo></mat-datepicker>
        </span>
      </div>
      <div>
        <input type="text" type="text" formControlName="INSUREDNAMEKANA" placeholder="被保険者名（カナ）">
      </div>
      <div>
        <input type="text" type="text" formControlName="INSUREDNAMEKANJI" placeholder="被保険者名（漢字）">
      </div>
      <div>
        <input type="text" type="text" formControlName="CONTRACTORNAMEKANA" placeholder="契約者名（カナ）">
      </div>
      <div>
        <input type="text" type="text" formControlName="CONTRACTORNAMEKANJI" placeholder="契約者名（漢字）">
      </div>
      <div class="radio-form">
        <div><input type="radio" formControlName="BUTENKYOTENRADIO" value="buten">担当部</div>
        <div><input type="radio" formControlName="BUTENKYOTENRADIO" value="kyoten">担当拠点</div>
      </div>
      <div>
        <input type="text" type="text" formControlName="BUTENKYOTEN" placeholder="担当部・担当拠点">
      </div>
      <div>
        <button [disabled]="searchControl.invalid" (click)="search()">検索</button>
      </div>
    </form>
  </div>

  <ng-container *ngIf="!isError; else error">

    <!-- 正常 -->

    <!-- 事案一覧テーブルエリア -->
    <ng-container *ngIf="claims.length != 0">
      <table class="claim-list card" matSort (matSortChange)="listSort($event)">
        <tr class="claim-list-header">
          <th mat-sort-header="claimNumber">受付番号</th>
          <th mat-sort-header="insuredName">被保険者名</th>
          <th mat-sort-header="contractorName">契約者名</th>
          <th mat-sort-header="butenKanji">担当部</th>
          <th mat-sort-header="kyotenKanji">担当拠点</th>
          <th mat-sort-header="insuranceKind">保険種類</th>
          <th mat-sort-header="lastUpdateDate">最終更新日</th>
          <th mat-sort-header="lossDate">事故日</th>
          <th mat-sort-header="claimCategory">事案カテゴリ</th>
        </tr>
        <tr class="claim-list-data" #tableDatas *ngFor="let claim of claims" align="center" valign="middle">
          <td><a [routerLink]="['/detail', claim.CLAIMNUMBER]">{{ claim.CLAIMNUMBER }}</a></td>
          <td [appTooltip]="claim.INSUREDNAMEKANA" style="width: 160px">{{ claim.INSUREDNAMEKANA }}</td>
          <td [appTooltip]="claim.CONTRACTORNAMEKANA" style="width: 160px">{{ claim.CONTRACTORNAMEKANA }}</td>
          <td>{{ claim.BUTENKANJI }}</td>
          <td>{{ claim.KYOTENKANJI }}</td>
          <td>{{ claim.INSURANCEKIND }}</td>
          <td>{{ claim.LASTUPDATEDATE | date : 'yyyy/M/d' }}</td>
          <td>{{ claim.LOSSDATE | date : 'yyyy/M/d'}}</td>
          <td><span class="claim-category" [ngClass]="claim.categoryClass">{{ claim.CLAIMCATEGORY }}</span></td>
        </tr>
      </table>

      <!-- ページャーエリア -->
      <div class="pager child-centering">
        <form>
          <button *ngIf="displayFromPages > 1" mat-icon-button (click)="previous()">
            <mat-icon>arrow_back_ios</mat-icon>
          </button>
          <input name="page" type="number" [(ngModel)]="fromPages" required min="1" [max]="totalNumber">
          <span>～　{{ toPages }}　/　{{ totalNumber }}</span>
          <button *ngIf="toPages < totalNumber" mat-icon-button (click)="next()">
            <mat-icon>arrow_forward_ios</mat-icon>
          </button>
          <button mat-icon-button (click)="update()">
            <mat-icon>refresh</mat-icon>
          </button>
        </form>
      </div>
    </ng-container>

  </ng-container>

  <!-- 検索エラー -->
  <ng-template #error>
    <div class="error-message-box">
      <div class="error-message">
        <p class="font-size-xl">検索結果を取得出来ません。</p>
        <p class="font-size-l">担当者にお問い合わせください。</p>
      </div>
    </div>
  </ng-template>

  <!-- 認可エラー
    <ng-container *ngSwitchCase="'authError'">
      <div class="error-message-box">
        <div class="error-message">
          <p class="font-size-xl">正常なリクエストを確認出来ませんでした。</p>
          <p class="font-size-l">事案一覧を表示する権限がありません。。</p>
        </div>
      </div>
    </ng-container> -->

</main>
