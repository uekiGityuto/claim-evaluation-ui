<!-- ヘッダエリア -->
<header>
  <div class="main-header">
    <span>{{ userId }}</span>
  </div>
</header>

<main>
  <!-- サブヘッダエリア -->
  <div class="list-header-card">
    <form class="list-header-card-form" [(formGroup)]="searchControl">
      <div class="list-header-card-form-content">
        <input class="list-header-card-form-content__input" type="text" formControlName="claimNumber" placeholder="受付番号">
      </div>
      <div class="list-header-card-form-content">
        <select class="list-header-card-form-content__input" formControlName="claimCategoryInfo" placeholder="事案カテゴリ" multiple>
          <option value="高">高</option>
          <option value="中">中</option>
          <option value="低">低</option>
        </select>
      </div>
      <div class="list-header-card-form-content">
        <select class="list-header-card-form-content__input" formControlName="insuranceKindInfo" placeholder="保険種類" multiple>
          <option value="自動車">自動車</option>
          <option value="火災">火災</option>
        </select>
      </div>
      <div class="list-header-card-form-content list-header-card-form-content--from-lossdate">
        <input class="list-header-card-form-content__input" type="text" [matDatepicker]="pickerFrom" placeholder="事故日from" formControlName="fromLossDate">
        <span class=list-header-card-form-content__datepicker>
          <mat-datepicker-toggle matSuffix [for]="pickerFrom"></mat-datepicker-toggle>
          <mat-datepicker #pickerFrom></mat-datepicker>
        </span>
      </div>
      <div class="list-header-card-form-content">
        <span>～</span>
      </div>
      <div class="list-header-card-form-content list-header-card-form-content--to-lossdate">
        <input class="list-header-card-form-content__input" type=text [matDatepicker]="pickerTo" placeholder="事故日to" formControlName="toLossDate">
        <span class=list-header-card-form-content__datepicker>
          <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
          <mat-datepicker #pickerTo></mat-datepicker>
        </span>
      </div>
      <div class="list-header-card-form-content">
        <input class="list-header-card-form-content__input" type="text" formControlName="insuredNameKana" placeholder="被保険者名（カナ）">
      </div>
      <div class="list-header-card-form-content">
        <input class="list-header-card-form-content__input" type="text" formControlName="insuredNameKanji" placeholder="被保険者名（漢字）">
      </div>
      <div class="list-header-card-form-content">
        <input class="list-header-card-form-content__input" type="text" formControlName="contractorNameKana" placeholder="契約者名（カナ）">
      </div>
      <div class="list-header-card-form-content">
        <input class="list-header-card-form-content__input" type="text" formControlName="contractorNameKanji" placeholder="契約者名（漢字）">
      </div>
      <div class="list-header-card-form-content list-header-card-form-content__radio">
        <div><input type="radio" formControlName="butenKyotenRadio" value="buten">担当部</div>
        <div><input type="radio" formControlName="butenKyotenRadio" value="kyoten">担当拠点</div>
      </div>
      <div class="list-header-card-form-content">
        <input class="list-header-card-form-content__input" type="text" formControlName="butenKyoten" placeholder="担当部・担当拠点">
      </div>
      <div class="list-header-card-form-content">
        <button class="list-header-card-form-content__button" [disabled]="searchControl.invalid" (click)="search()">検索</button>
      </div>
    </form>
  </div>

  <ng-container *ngIf="!isError; else error">

    <!-- 正常 -->

    <!-- 事案一覧テーブルエリア -->
    <ng-container *ngIf="claims.length != 0">
      <table class="claim-list-card" matSort (matSortChange)="listSort($event)">
        <tr class="claim-list-header">
          <th mat-sort-header="claimNumber">受付番号</th>
          <th mat-sort-header="insuredName">被保険者名</th>
          <th mat-sort-header="contractorName">契約者名</th>
          <th mat-sort-header="butenKanji">担当部</th>
          <th mat-sort-header="kyotenKanji">担当拠点</th>
          <th mat-sort-header="insuranceKind">保険種類</th>
          <th mat-sort-header="lastUpdateDate">最終更新日</th>
          <th mat-sort-header="lossDate">事故日</th>
          <th mat-sort-header="claimCategory">事案カテゴリ</th>
        </tr>
        <tr class="claim-list-dataset" #tableDatas *ngFor="let claim of claims" align="center" valign="middle">
          <td class="claim-list-dataset__data"><a [routerLink]="['/detail', claim.CLAIMNUMBER]">{{ claim.CLAIMNUMBER }}</a></td>
          <td class="claim-list-dataset__data" [appTooltip]="claim.INSUREDNAMEKANA" style="width: 160px">{{ claim.INSUREDNAMEKANA }}</td>
          <td class="claim-list-dataset__data" [appTooltip]="claim.CONTRACTORNAMEKANA" style="width: 160px">{{ claim.CONTRACTORNAMEKANA }}</td>
          <td class="claim-list-dataset__data">{{ claim.BUTENKANJI }}</td>
          <td class="claim-list-dataset__data">{{ claim.KYOTENKANJI }}</td>
          <td class="claim-list-dataset__data">{{ claim.INSURANCEKIND }}</td>
          <td class="claim-list-dataset__data">{{ claim.LASTUPDATEDATE | date : 'yyyy/M/d' }}</td>
          <td class="claim-list-dataset__data">{{ claim.LOSSDATE | date : 'yyyy/M/d'}}</td>
          <td class="claim-list-dataset__data"><span class="claim-list-dataset__claim-category" [ngClass]="claim.categoryClass">{{ claim.CLAIMCATEGORY }}</span></td>
        </tr>
      </table>

      <!-- ページャーエリア -->
      <div class="pager">
        <form>
          <button *ngIf="displayFromPages > 1" mat-icon-button (click)="previous()">
            <mat-icon>arrow_back_ios</mat-icon>
          </button>
          <input class="pager__input" name="page" type="number" [(ngModel)]="fromPages" required min="1" [max]="totalNumber">
          <span>～　{{ toPages }}　/　{{ totalNumber }}</span>
          <button *ngIf="toPages < totalNumber" mat-icon-button (click)="next()">
            <mat-icon>arrow_forward_ios</mat-icon>
          </button>
          <button class="pager__update-button" mat-icon-button (click)="update()">
            <mat-icon>refresh</mat-icon>
          </button>
        </form>
      </div>
    </ng-container>

  </ng-container>

  <!-- 検索エラー -->
  <ng-template #error>
    <div class="error-message-box">
      <div class="error-message">
        <p class="error-message__main">検索結果を取得出来ません。</p>
        <p class="error-message__sub">担当者にお問い合わせください。</p>
      </div>
    </div>
  </ng-template>

  <!-- 認可エラー
    <ng-container *ngSwitchCase="'authError'">
      <div class="error-message-box">
        <div class="error-message">
          <p class="font-size-xl">正常なリクエストを確認出来ませんでした。</p>
          <p class="font-size-l">事案一覧を表示する権限がありません。。</p>
        </div>
      </div>
    </ng-container> -->

</main>
